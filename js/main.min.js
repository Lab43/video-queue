var videoWidth=840,videoHeight=Math.round(videoWidth*9/16);(function(e,t){function n(t,n){var r=e('<div class="video highlight">'),i="";switch(t){case"vimeo":r.attr("data-id","v:"+n);i+='<iframe src="http://player.vimeo.com/video/';i+=n;i+='?title=0&byline=0&portrait=0" width="'+videoWidth+'" height="'+videoHeight+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>';break;case"youtube":r.attr("data-id","y:"+n);i+='<iframe id="ytplayer" type="text/html" width="'+videoWidth+'" height="'+videoHeight+'" src="http://www.youtube.com/embed/';i+=n;i+='?rel=0&showinfo=0&autohide=1" frameborder="0"/>'}r.append(i);r.append('</div><a href="#" class="remove" title="Remove this video">Remove Video</a></div>');return r}function r(){i();e("#url").addClass("invalid");e("#url-form .container").append('<div class="error">Sorry, I don&apos;t understand that URL. Video Queue only supports YouTube and Vimeo. URLs should look like <strong>http://www.youtube.com/watch?v=XSGBVzeBUbk</strong> or <strong>http://vimeo.com/1084537</strong>.<a href="#" class="close">Close</a></div>')}function i(){e("#url-form .error").remove();e("#url").removeClass("invalid")}function s(){var t=[];e(".video").each(function(n,r){t.push(e(r).attr("data-id"))});window.location.hash=t.join("/")}function o(e){var t=e.match(/.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/);if(t)return{source:"youtube",code:t[1]};t=e.match(/http:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/);return t?{source:"vimeo",code:t[2]}:!1}e("#url-form").on("submit",function(t){t.preventDefault();i();var u=e("#url").val(),a=o(u);if(!a)return r();e("#url").val("").blur();e("#videos").append(n(a.source,a.code)).removeClass("empty");e(":not(.lt-ie9) #videos").fitVids();setTimeout(function(){e(".video:last").removeClass("highlight")},1200);var f=e("#url-form").outerHeight()*-1.75;e.scrollTo(".video:last",600,{offset:f});s()});e(document).on("click","a.remove",function(t){t.preventDefault();e(this).parent().remove();e(".video").length===0&&e("#videos").addClass("empty");s()});e(document).on("click","a.close",function(e){e.preventDefault();i()});e(function(){e(":not(.lt-ie9) h1").fitText(.47);e(":not(.lt-ie9) #header p").fitText(3.5,{minFontSize:"12px"});var t=e("#url-form"),r=t.offset();e(window).scroll(function(n){e(this).scrollTop()>r.top?e(t).addClass("fixed"):e(t).removeClass("fixed")});var i=window.location.hash.substring(1).split("/"),s=!1;e.each(i,function(t,r){if(!r)return;s=!0;r=r.split(":");var i=r[0]==="v"?"vimeo":"youtube";e("#videos").append(n(i,r[1])).removeClass("empty")});if(s){e(":not(.lt-ie9) #videos").fitVids();e(":not(.lt-ie9) .video").removeClass("highlight");var o=e("#url-form").outerHeight()*-1.75;e.scrollTo(".video:first",0,{offset:o})}else e("#url").focus()})})(jQuery);